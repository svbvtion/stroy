const SSR_MESSAGE="Sal was not initialised! Probably it is used in SSR.",NOT_SUPPORTED_MESSAGE="Your browser does not support IntersectionObserver!\nGet a polyfill from here:\nhttps://github.com/w3c/IntersectionObserver/tree/master/polyfill";let options={rootMargin:"0% 50%",threshold:.5,animateClassName:"sal-animate",disabledClassName:"sal-disabled",enterEventName:"sal:in",exitEventName:"sal:out",selector:"[data-sal]",once:!0,disabled:!1},elements=[],intersectionObserver=null;const setOptions=e=>{e&&e!==options&&(options={...options,...e})},clearAnimation=e=>{e.classList.remove(options.animateClassName)},fireEvent=(e,s)=>{const t=new CustomEvent(e,{bubbles:!0,detail:s});s.target.dispatchEvent(t)},animate=e=>{e.target.classList.add(options.animateClassName),fireEvent(options.enterEventName,e)},reverse=e=>{clearAnimation(e.target),fireEvent(options.exitEventName,e)},isAnimated=e=>e.classList.contains(options.animateClassName),enableAnimations=()=>{document.body.classList.remove(options.disabledClassName)},disableAnimations=()=>{document.body.classList.add(options.disabledClassName)},clearObserver=()=>{intersectionObserver.disconnect(),intersectionObserver=null},isDisabled=()=>options.disabled||"function"==typeof options.disabled&&options.disabled(),onIntersection=(e,s)=>{e.forEach((e=>{const{target:t}=e,n=void 0!==t.dataset.salRepeat,o=void 0!==t.dataset.salOnce,i=n||!(o||options.once);e.intersectionRatio>=options.threshold?(animate(e),i||s.unobserve(t)):i&&reverse(e)}))},disable=()=>{disableAnimations(),clearObserver()},enable=()=>{document.body.classList.remove(options.disabledClassName),intersectionObserver=new IntersectionObserver(onIntersection,{rootMargin:options.rootMargin,threshold:options.threshold}),elements=[].filter.call(document.querySelectorAll(options.selector),(e=>!isAnimated(e,options.animateClassName))),elements.forEach((e=>intersectionObserver.observe(e)))},reset=(e={})=>{clearObserver(),Array.from(document.querySelectorAll(options.selector)).forEach(clearAnimation),setOptions(e),enable()},init=(e=options)=>{if(setOptions(e),"undefined"==typeof window)return console.warn(SSR_MESSAGE),{elements:elements,disable:disable,enable:enable,reset:reset};if(!window.IntersectionObserver)throw disableAnimations(),Error(NOT_SUPPORTED_MESSAGE);return options.disabled||"function"==typeof options.disabled&&options.disabled()?disableAnimations():enable(),{elements:elements,disable:disable,enable:enable,reset:reset}};export default init;